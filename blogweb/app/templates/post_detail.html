{% extends "base.html" %}
{% block styles %}

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
{% endblock %}

{% block content %}

<!-- post_detail.html -->
<h1>{{ post.title }}</h1>
<p>{{ post.content }}</p>
<p>Author: {{ post.author.username }}</p>

<!-- display replies -->
{% if replies %}
    <p>{{post.replies_count()}} replies</p>
    <h2>Replies:</h2>
    <ul>
        {% for reply in replies %}
            <li>{{ reply.content }}</li>
            <small>By: {{ reply.user.username }}, {{ reply.timestamp.strftime('%Y-%m-%d %H:%M:%S') }}</small>
        {% endfor %}
    </ul>
{% else %}
    <p>No replies yet.</p>
{% endif %}

<form method="POST" action="{{ url_for('post_detail', post_id=post.id) }}">
  {{ reply_form.hidden_tag() }}
  <div class="form-group">
      {{ reply_form.content.label }}
      {{ reply_form.content(class="form-control") }}
  </div>
  <button type="submit" class="btn btn-primary">Submit</button>
</form>
 
<a class="btn btn-primary" style = "margin-top: 20px;" href="{{url_for('index', page=1)}}"> Back to index page</a>

{% endblock %}

