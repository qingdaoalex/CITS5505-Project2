{% extends "base2.html" %}
{% block content %}
	<div class="flip-container">
		<div class="flipper" id="flipper">
			<div class="register" id="register">
				<form class="form-container" id="register-form" action="" method="POST" novalidate>
					{{ form.hidden_tag() }}
					<h1 class="form-title">Register</h1>
					<div class="form-content">
						<div class="form-box">
							<i class="ri-user-3-line input-icon"></i>
							<div class="input-box">
								{{ form.username(size=32, class="input-area", id="register-user-name", placeholder=" ") }}
								{{ form.username.label(class="input-label") }}
							</div>
						</div>
					</div>
					<div class="form-content">
						<div class="form-box">
							<i class="ri-mail-line input-icon"></i>
							<div class="input-box">
								{{ form.email(size=32, class="input-area", id="email-send", placeholder=" ") }}
								{{ form.email.label(class="input-label") }}
							</div>
						</div>
					</div>
					<div class="form-content">
						<div class="form-box">
							<i class="ri-lock-2-line input-icon"></i>
							<div class="input-box">
								{{ form.password(size=32, class="input-area", id="register-password", placeholder=" ") }}
								{{ form.password.label(class="input-label") }}
							</div>
						</div>
					</div>
					<div class="form-content">
						<div class="form-box">
							<i class="ri-lock-2-line input-icon"></i>
							<div class="input-box">
								{{ form.password2(size=32, class="input-area", id="confirm-password", placeholder=" ") }}
								{{ form.password2.label(class="input-label") }}
							</div>
						</div>
					</div>
					{{ form.submit(class="submit-button", id="register-button") }}
					<p class="reminder">
						Already have an account?
						<br>
						<a class="flipbutton" href="{{ url_for('login') }}">Login Here</a>
					</p>
				</form>
			</div>
		</div>
	</div>
	<script>
    document.getElementById('register-form').addEventListener('submit', function(event) {
			event.preventDefault(); // Prevent the form from submitting
			});

		document.getElementById('register-user-name').addEventListener('input', function() {
			var username = this.value;
			var usernameIsValid = /^[a-zA-Z0-9]{4,19}$/.test(username);
			if (!usernameIsValid) {
					this.style.backgroundColor = '#F7B7A6';
					alert("Username can only contain numbers or alphabets, and must be between 4 to 19 characters long.");
			} else {
					this.style.backgroundColor = ''; 
			}
		});


		document.getElementById('register-password').addEventListener('input', function() {
			var password = this.value;
			var passwordIsValid = /^(?=.*\d)(?=.*[a-zA-Z])[0-9a-zA-Z]{7,19}$/.test(password);
			if (passwordIsValid) {
					this.style.backgroundColor = '#DAF7A6';
			} else {
					this.style.backgroundColor = '#F7B7A6';
			}
		});

		document.getElementById('confirm-password').addEventListener('input', function() {
			var confirmPassword = this.value;
			var password = document.getElementById('register-password').value;
			var passwordsMatch = password === confirmPassword;
			if (passwordsMatch) {
					this.style.backgroundColor = 'lightgreen';
			} else {
					this.style.backgroundColor = 'salmon';
			}
		});
	</script>
{% endblock %}